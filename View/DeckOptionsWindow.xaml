<Window x:Class="FlashMemo.View.DeckOptionsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:wrappers="clr-namespace:FlashMemo.ViewModel.Wrappers" xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        Title="Deck Options"
        Width="900"
        Height="993"
        Background="#FF1E1E1E"
        WindowStartupLocation="CenterOwner"
        Closing="Window_Closing">

    <Grid Margin="16,16,16,-58">

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ================= TOP BAR ================= -->

        <DockPanel Grid.Row="0" Margin="0,0,0,16">

            <!-- Preset Selector -->
            <ComboBox
                Width="741"
                ItemsSource="{Binding AllPresets}"
                SelectedItem="{Binding CurrentOptions, Mode=OneWay}"
                SelectionChanged="PresetSelectionChanged"
                DisplayMemberPath="Name"/>

            <!-- Save Button -->
            <Button
                Content="Save"
                Style="{StaticResource NavButtonStyle}"
                Command="{Binding SaveChangesCommand}"
                DockPanel.Dock="Right"
                Width="90"/>

            <!-- Menu -->
            <Menu DockPanel.Dock="Right" Margin="0,0,8,0" Width="29">
                <MenuItem Header="⋮" Height="40" Width="29">
                    <MenuItem Header="Clone"
                              Command="{Binding ClonePresetCommand}"/>

                    <MenuItem Header="Delete"
                              Click="TryDeletePreset" IsEnabled="{Binding CanSaveOrDelete}"/>

                    <MenuItem Header="Reset to Default"
                              Command="{Binding ToDefaultCommand}"/>

                    <MenuItem Header="Revert"
                              Command="{Binding RevertChangesCommand}"/>
                </MenuItem>
            </Menu>

        </DockPanel>

        <!-- ================= CONTENT ================= -->

        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto">

            <StackPanel>

                <!-- ===== DAILY LIMITS ===== -->

                <Border Style="{StaticResource OptionsCardStyle}">
                    <StackPanel>

                        <TextBlock
                            Text="Daily Limits"
                            Style="{StaticResource OptionsSectionTitleStyle}"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <TextBlock
                                Text="New cards / day"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.DailyLimits.DailyLessonsLimit}" Margin="0,2,489,4"/>

                            <TextBlock
                                Grid.Row="1"
                                Text="Reviews / day"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="1"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.DailyLimits.DailyReviewsLimit}" Margin="0,4,489,4"/>

                        </Grid>

                    </StackPanel>
                </Border>

                <!-- ===== SCHEDULING ===== -->

                <Border Style="{StaticResource OptionsCardStyle}">
                    <StackPanel>

                        <TextBlock
                            Text="Scheduling Multipliers"
                            Style="{StaticResource OptionsSectionTitleStyle}"/>

                        <Grid>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <TextBlock
                                Text="Good multiplier"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.GoodMultiplier}" Margin="0,4,489,4"/>

                            <TextBlock
                                Grid.Row="1"
                                Text="Easy multiplier"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="1"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.EasyMultiplier}" Margin="0,4,489,4"/>

                            <TextBlock
                                Grid.Row="2"
                                Text="Hard multiplier"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="2"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.HardMultiplier}" Margin="0,4,489,4"/>

                        </Grid>

                    </StackPanel>
                </Border>

                <!-- ===== STAGES ===== -->

                <Border Style="{StaticResource OptionsCardStyle}">
                    <StackPanel>

                        <TextBlock
                            Text="Stages and Intervals"
                            Style="{StaticResource OptionsSectionTitleStyle}"/>

                        <Grid>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="240"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <TextBlock
                                Text="Graduate day count"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.GraduateDayCount}" Margin="0,4,449,4"/>

                            <TextBlock
                                Grid.Row="1"
                                Text="Easy on new (days)"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="1"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.EasyOnNewDayCount}" Margin="0,4,449,4"/>

                            <TextBlock
                                Grid.Row="2"
                                Text="Again review stage"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="2"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.AgainOnReviewStage}" Margin="0,4,449,4"/>

                            <TextBlock
                                Grid.Row="3"
                                Text="Good on new stage"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="3"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.GoodOnNewStage}" Margin="0,4,449,4"/>

                            <TextBlock
                                Grid.Row="4"
                                Text="Hard on new stage"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <TextBox
                                Grid.Row="4"
                                Grid.Column="1"
                                Style="{StaticResource OptionsTextBoxStyle}"
                                Text="{Binding CurrentOptions.Scheduling.HardOnNewStage}" Margin="0,4,449,4"/>

                            <TextBlock
                                Grid.Row="5"
                                Text="Learning stages (minutes)"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <StackPanel
                                Grid.Row="5"
                                Grid.Column="1"
                                Orientation="Horizontal"
                                HorizontalAlignment="Left">

                                <TextBox
                                    Width="40"
                                    MaxLength="2"
                                    Margin="0,4,10,4"
                                    Style="{StaticResource OptionsTextBoxStyle}"
                                    Text="{Binding CurrentOptions.Scheduling.LearningStages.First}"/>

                                <TextBox
                                    Width="40"
                                    MaxLength="2"
                                    Margin="0,0,10,0"
                                    Style="{StaticResource OptionsTextBoxStyle}"
                                    Text="{Binding CurrentOptions.Scheduling.LearningStages.Second}"/>

                                <TextBox
                                    Width="40"
                                    MaxLength="2"
                                    Style="{StaticResource OptionsTextBoxStyle}"
                                    Text="{Binding CurrentOptions.Scheduling.LearningStages.Third}"/>

                            </StackPanel>

                        </Grid>
                    </StackPanel>
                </Border>

                <!-- ===== SORTING ===== -->

                <Border Style="{StaticResource OptionsCardStyle}">
                    <StackPanel>

                        <TextBlock
                            Text="Sorting"
                            Style="{StaticResource OptionsSectionTitleStyle}"/>

                        <Grid>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="200"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>

                            <!-- ================= LESSON ORDER ================= -->

                            <TextBlock
                                Text="Lesson order"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <StackPanel
                                Grid.Column="1"
                                Orientation="Horizontal"
                                VerticalAlignment="Center">

                                <!-- Order Combo -->
                                <ComboBox
                                    Width="180"
                                    ItemsSource="{Binding LessonOrderEnum}"
                                    SelectedItem="{Binding CurrentOptions.Sorting.LessonsOrder}" Height="22"/>

                                <!-- Direction Label -->
                                <TextBlock
                                    Text=" Dir:"
                                    Margin="10,0,6,0"
                                    VerticalAlignment="Center"
                                    Foreground="#CCCCCC"/>

                                <!-- Direction Toggle -->
                                <Button
                                    Style="{StaticResource SortDirButtonStyle}"
                                    Content="{Binding CurrentOptions.Sorting.LessonsDirArrow}"
                                    ToolTip="{Binding CurrentOptions.Sorting.LessonsDirTooltip}"
                                    Command="{Binding CurrentOptions.Sorting.ToggleLessonsDirCommand}" Height="26" Margin="0,2,0,2" Foreground="#FFFDFF00"/>
                            </StackPanel>

                            <!-- ================= REVIEW ORDER ================= -->

                            <TextBlock
                                Grid.Row="1"
                                Text="Review order"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <StackPanel
                                Grid.Row="1"
                                Grid.Column="1"
                                Orientation="Horizontal"
                                VerticalAlignment="Center">

                                <!-- Order Combo -->
                                <ComboBox
                                    Width="180"
                                    ItemsSource="{Binding ReviewOrderEnum}"
                                    SelectedItem="{Binding CurrentOptions.Sorting.ReviewsOrder}" Height="22"/>

                                <!-- Direction Label -->
                                <TextBlock
                                    Text=" Dir:"
                                    Margin="10,0,6,0"
                                    VerticalAlignment="Center"
                                    Foreground="#CCCCCC"/>

                                <!-- Direction Toggle -->
                                <Button
                                    Style="{StaticResource SortDirButtonStyle}"
                                    Content="{Binding CurrentOptions.Sorting.ReviewsDirArrow}"
                                    ToolTip="{Binding CurrentOptions.Sorting.ReviewsDirTooltip}"
                                    Command="{Binding CurrentOptions.Sorting.ToggleReviewsDirCommand}" Height="26" Margin="0,2,0,2" Foreground="#FFFFF500"/>
                            </StackPanel>

                            <!-- ================= CARD TYPE ORDER ================= -->

                            <TextBlock
                                Grid.Row="2"
                                Text="Card order"
                                Style="{StaticResource OptionsLabelStyle}"/>

                            <ComboBox
                                Grid.Row="2"
                                ItemsSource="{Binding CardStateOrderEnum}"
                                SelectedItem="{Binding CurrentOptions.Sorting.CardStateOrder}" Grid.Column="1" Margin="0,4,429,2"/>

                        </Grid>

                    </StackPanel>
                </Border>

            </StackPanel>

        </ScrollViewer>

        <!-- ================= BOTTOM ================= -->

        <StackPanel
            Grid.Row="2"
            Orientation="Horizontal"
            HorizontalAlignment="Right"
            Margin="0,12,0,0">

            <Button
                Content="Close"
                Width="100"
                Style="{StaticResource NavButtonStyle}"
                IsCancel="True"/>

        </StackPanel>

    </Grid>
</Window>